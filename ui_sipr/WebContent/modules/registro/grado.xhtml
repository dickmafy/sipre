<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<h:form id="fGrado" ajaxSubmit="false">
		<div id="contenido_formulario">
			<div id="page_flow">Parametrización / Gestionar Grado</div>
			<div id="titulo_formulario">Gestionar Grado</div>
			<div id="contenido">

				<p:messages id="messages" showIcon="true" showSummary="true"
					autoUpdate="true" closable="true" />

				<p:commandButton icon="_ui-icon-add" styleClass="boton_botonera"
					value="Agregar Concepto personal" actionListener="#{gradoMb.newBean}"
					oncomplete="PF('wdiGrado').show()" />


				<p:dataTable widgetVar="dt" id="dt" var="item"
					value="#{gradoMb.beanList}" paginatorPosition="bottom"
					resizableColumns="true" paginator="true" rows="8"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} ">

					<f:facet name="header">
						<h:outputText value="Lista de Grupo - Grado" />
					</f:facet>

					<p:column headerText="Id" style="width:20%; align:center;"
						filterBy="#{item.cgradoCodigo}" 
						filterMatchMode="contains" sortBy="#{item.cgradoCodigo}">
						<h:outputText value="#{item.cgradoCodigo}" />
					</p:column>
					<p:column headerText="Desc. Corta"
						style="width:50%; text-align:center">
						<h:outputText value="#{item.vgradoDscCorta}" />
					</p:column>
					<p:column headerText="Desc. Larga"
						style="width:50%; text-align:center">
						<h:outputText value="#{item.vgradoDscLarga}" />
					</p:column>
				

					<p:column headerText="Opciones" style="width:20%">

						<p:commandLink oncomplete="PF('wduGrado').show()"
							update=":fuGrado">
							<f:setPropertyActionListener value="#{item}"
								target="#{gradoMb.bean}" />
							<p:graphicImage value="/images/icons/pencil_12.png" />
						</p:commandLink>

						<p:spacer width="10" />

					</p:column>
				</p:dataTable>
			</div>
		</div>
	</h:form>

	<!-- Nuevo-->
	<p:dialog id="diGrado" widgetVar="wdiGrado" header="Guardar"
		closable="true" closeOnEscape="true" showEffect="fade" height="300"
		resizable="true" width="500px" modal="true" appendTo="@(body)">
		<h:form id="fiGrado">
			<p:panelGrid columns="2">

				<p:outputLabel value="CIP" />
				<p:inputText value="#{gradoMb.bean.cgradoCodigo}" />

				<p:outputLabel value="Desc. Corta" />
				<p:inputText value="#{gradoMb.bean.vgradoDscCorta}" />

				<p:outputLabel value="Desc. Larga" />
				<p:inputTextarea value="#{gradoMb.bean.vgradoDscLarga}" cols="25"
					rows="10" />

				

				<p:commandButton title="Guardar" value="Guardar" icon="icn_bar_save"
					actionListener="#{gradoMb.saveBean}" ajax="true"
					oncomplete="PF('wdiGrado').hide();" update=":fGrado:dt">
				</p:commandButton>

			</p:panelGrid>
		</h:form>
	</p:dialog>

	<!-- Update-->
	<p:dialog id="duGrado" widgetVar="wduGrado" header="Guardar"
		closable="true" closeOnEscape="true" showEffect="fade" height="300"
		resizable="true" width="500px" modal="true" appendTo="@(body)">

		<h:form id="fuGrado">
			<p:panelGrid columns="2">

				<p:outputLabel value="Codigo Grado" />
				<p:inputText value="#{gradoMb.bean.cgradoCodigo}" />

				<p:outputLabel value="Desc. Corta" />
				<p:inputText value="#{gradoMb.bean.vgradoDscCorta}" />

				<p:outputLabel value="Desc. Larga" />
				<p:inputTextarea value="#{gradoMb.bean.vgradoDscLarga}" cols="25"
					rows="10" />

			
				<p:commandButton title="Guardar" value="Guardar" icon="icn_bar_save"
					actionListener="#{gradoMb.updateBean}" ajax="true"
					oncomplete="PF('wduGrado').hide();" update=":fGrado:dt">
				</p:commandButton>

			</p:panelGrid>
		</h:form>
	</p:dialog>

	<!-- Elimina-->
	<p:dialog id="ddGrado" widgetVar="wddGrado" showEffect="fade"
		hideEffect="fade" header="Eliminar" modal="true" appendTo="@(body)"
		resizable="false">
		<h:form id="fdGrado">
			<table>
				<tr>
					<td><p:graphicImage value="/images/icons/logout_32.png" /></td>
					<td>#{perfilMb.perfilSelected.nombrePerfil}, <b>¿Desea
							eliminar el perfil?</b></td>
				</tr>
			</table>
			<p:commandButton value="Cancelar" styleClass="boton_botonera"
				icon="_ui-icon-back" onclick="PF('wddGrado').hide();" />

			<p:commandButton value="Eliminar" styleClass="boton_botonera"
				oncomplete="PF('wddGrado').hide();" update=":fGrado:dt"
				icon="_ui-icon-logout" actionListener="#{gradoMb.deleteBean}"
				ajax="false" />

		</h:form>
	</p:dialog>


</ui:composition>